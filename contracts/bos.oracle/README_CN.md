BOS.Oracle：见证与变革
----------

## 概述

在现实世界中，商家如果不能确定能收到钱就不会将商品出售，消费者如果不能确定商品的真伪就不敢贸然购买。“可信”是现实世界中交易的最基本条件，如果我们无法达成信任那么也就无法完成交易。信任对我们来说是如此的重要，然而很多时候难以达成信任，往往只能依赖于交易双方的信誉（这本质上是依托于以往的交易历史，做概率上的估计）或者依托于某个可信的第三方（它是否真的可信，信任的基础又来自于哪里？）。在复杂的现实环境中，这使得我们承担了更多的风险，耗费了更多的精力和资源。怎样解决这一问题？能否结合区块链技术来改变这一现状？BOS 的预言机（Oracle）服务就是我们的答案，希望能够作为区块链与现实世界的数据桥梁。

有些预言机服务的设计是基于可信数据源或者权威数据源这一假设，这样的假设从理论上来说有很大风险，无法保证这种数据源提供数据的真实性。BOS 的预言机系统从构建之初所遵循的原则就是： 

```
    不依赖于每一个预言机数据提供者一定会提供真实数据，而是承认其不足进而将其作为博弈的参与方加入到系统中来，以期在博弈中达到整体可信
```

这样在博弈过程中只要将参与方与现实世界的角色进行映射，那么不但能得到区块链输入数据的可信性，同时我们还可以向现实世界输出“信任”。事实上这更像是一个基于区块链的可信平台，而它的服务展示形式是预言机。BOS 预言机将会使得区块链的价值从其货币属性延伸到了交易和规则的构建上，这种延伸将会解决或改进许多现实世界的信任问题，从而扩大区块链的应用边界，并最终让区块链技术可以在交易转账以外场景落地。

## 特点 
### 博弈完备

整个预言机系统是基于博弈论的观点建立的，我们将预言机所涉及到的角色进行抽象，将提供数据或服务的角色称为数据提供者，而消费数据的角色则称为数据使用者，同时我们还引入了仲裁员的角色来完成整个博弈模型的构建。

在使用一个预言机提供的数据服务时，任何人都可以进行检举揭发，发起上诉，如果不服本轮裁决可进行多轮仲裁，系统会对最终判定的作恶者进行惩罚。整个系统会形成“数据提供”、“数据使用者”、“仲裁员”三方的博弈平衡，而整个博弈过程和规则制定可以保证公正是极大概率的事件。

### 正向激励

BOS 预言机的博弈模型可以构建数据提供者间的囚徒困境，提供受害者的上诉动力来源，保证仲裁员的公正判决。总之系统的规则对于理性的参与者来说是静态的可预见的，因而诚实公正地进行参与才是其优势策略，对于非理性的参与者系统也能够以极大概率予以惩罚，从而使得整个预言机服务将会正向、健康、高效的运行。

### 全场景覆盖

在 BOS 预言机的构建过程中，我们充分的认识到了现实世界数据的复杂性、不规整性、零散性以及隐私性。从公开可方便获取的数据（比如天气）到有限制的数据（比如个人征信）都可以成为 BOS 的预言机服务。 任何可以被描述并在一定意义上可以被鉴别的数据服务都可通过 BOS 预言机的来提供服务，数据的提供方式可以通过链上合约、链上回调、链下回调等多种方式来实现数据提供。

## 构成
### 抵押模型

抵押模型是整个 BOS 预言机系统的核心，正是依托于抵押模型采用问责触发机制将系统构建起来。在系统中数据提供者、仲裁员、申诉人均需要抵押 Token。**抵押作为惩罚和奖赏的锚点是系统正向激励的基础**，当参与者被系统裁定为作恶时，相应的举报人、公正的仲裁员将得到相应的抵押款作为奖励。

### 仲裁模型

仲裁模块是系统公平的来源。为了避免行贿的达成，系统采用了多轮仲裁、每一轮仲裁员人数逐级增加的方案。随着仲裁员规模的扩大将使行贿变越来越困难，成本也急剧提高，最终会导致行贿失败。 

BOS 预言机的仲裁模型中会分成两个阶段：  

- “全职仲裁员”阶段，该阶段的仲裁员共 21 名，他们必须对仲裁案件进行及时的响应；这一阶段总共可以进行3轮仲裁，每一轮人数为3、5、9，并且每轮人数不重复；
- “大众仲裁员”阶段，该阶段会让整个预言机系统的参与者加入，将会分多轮，每轮数量翻倍的方式来进行；

### 智能风控

为最大限度的保证安全，“智能风控”始终能够保证数据提供者有足够的抵押 Token 被锁定来对其进行惩罚。它的主要逻辑是使用基于预言机服务DApp的玩家将 Token 直接转入到“智能风控”的账户而不是 DApp 项目方的账户，当有人针对该预言机服务发起仲裁的时候，“智能风控”将会根据数据提供者的历史行为以及当前支出等信息智能的计算出资金冻结时间以及解冻周期。如果整个过程没有出现异常，DApp 项目方可以正常地从“智能风控”账户提取 Token。

“智能风控”是一个可选项，取决于 DApp 项目方是否采用。但从市场竞争的角度来看，为用户提供更多保障的 DApp 将会获得更多的青睐。

![智能风控](res/bosoracle_risk_control.png)  


### 数据形态
考虑到数据多样、复杂的特点，系统将提供多种数据的交互方式以方便使用。总体上将数据的使用方式归纳为以下四种：

#### 1. 数据提者先行写入数据到链上，使用者读取

![数据提供1](res/bosoracle_df_table.jpg)  

#### 2. 数据提供者监听调用事件，链上主动推送数据到使用者

![数据提供2](res/bosoracle_df_listen_table.jpg)  

#### 3. 数据提供者监听调用事件，链下主动推送数据到使用者

![数据提供3](res/bosoracle_df_listen_offchain.png)  

#### 4. 链下完成数据交互，签名保证数据可靠

![数据提供4](res/bosoracle_df_offchain1.jpg)  

##### 4.1 链下数据交互流程

![数据提供5](res/bosoracle_df_offchain_detail.png)  




